<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="../assets/img/icon/apple-touch-icon.png"
    />
    <link rel="icon" sizes="32x32" href="../assets/img/icon/icon-32x32.ico" />
    <link rel="icon" sizes="16x16" href="../assets/img/icon/icon-16x16.ico" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link rel="manifest" href="../manifest.json" />
    <link rel="stylesheet" href="../assets/css/materialize.min.css" />
    <link rel="stylesheet" href="../assets/css/style.css" />
    <meta name="theme-color" content="#38003c" />
    <title>Premier League PWA</title>
  </head>

  <body>
    <nav role="navigation" class="navigationDetail">
      <div class="container">
        <a href="../index.html">
          <i class="material-icons arrowBack">arrow_back</i>
        </a>
      </div>
    </nav>

    <div
      id="body-content"
      class="body-content"
      style="background-color: #dfd3c3;"
    >
      <div class="center-align" id="loader"></div>

      <div>
        <div class="fixed-action-btn">
          <a class="btn-floating btn-large red darken-3" id="delete">
            <i class="large material-icons">delete</i>
          </a>
        </div>

        <div class="fixed-action-btn">
          <button
            class="btn-floating btn-large light-green darken-3 pulse"
            id="save"
          >
            <i class="large material-icons">save</i>
          </button>
        </div>
      </div>

      <div class="row">
        <div class="col s12" style="padding: 0;">
          <ul class="tabs">
            <li class="tab col s6">
              <a class="active" href="#overview">OVERVIEW</a>
            </li>
            <li class="tab col s6"><a href="#matches">MATCHES</a></li>
          </ul>
        </div>
        <div id="overview" class="col s12 tabs-desc"></div>
        <div id="matches" class="col s12"></div>
      </div>
    </div>

    <div class="preloader-wrapper big active">
      <div class="spinner-layer spinner-blue">
        <div class="circle-clipper left">
          <div class="circle"></div>
        </div>
        <div class="gap-patch">
          <div class="circle"></div>
        </div>
        <div class="circle-clipper right">
          <div class="circle"></div>
        </div>
      </div>
    </div>

    <script>
      window.onload = function () {
        setTimeout(function () {
          document.querySelector(".body-content").style.display = "block";
          document.querySelector(".preloader-wrapper").style.display = "none";
        }, 2000);
      };

      document.addEventListener("DOMContentLoaded", () => {
        var elems = document.querySelectorAll(".tabs");
        M.Tabs.init(elems);

        var item = getTeam();
        getMatch();

        let urlParams = new URLSearchParams(window.location.search);
        let id = Number(urlParams.get("id"));
        // checkFavorite(id);

        var save = document.getElementById("save");
        var del = document.getElementById("delete");
        checkFavorite(id)
          .then((msg) => {
            console.log(msg);
            save.style.display = "none";
            del.style.display = "block";
          })
          .catch((msg) => {
            console.log(msg);
            save.style.display = "block";
            del.style.display = "none";
          });

        save.onclick = function () {
          console.log("Tombol save di klik.");
          item.then(function (team) {
            saveFavorite(team);
          });
          save.style.display = "none";
          del.style.display = "block";
        };

        del.onclick = function () {
          console.log("Tombol delete di klik.");
          swal({
            title: "Are you sure?",
            // text: "Once deleted, you will not be able to recover this imaginary file!",
            icon: "warning",
            buttons: true,
            dangerMode: true,
          }).then((willDelete) => {
            if (willDelete) {
              // swal("Club berhasil dihapus dari daftar favorit!", {
              //   icon: "success",
              // });
              deleteFavorite(id);
              del.style.display = "none";
              save.style.display = "block";
            } else {
              swal("Club tidak jadi dihapus dari daftar favorit!");
            }
          });
        };
      });
    </script>
    <script src="../assets/js/materialize.min.js"></script>
    <script src="../assets/js/idb.js"></script>
    <script src="../assets/js/db.js"></script>
    <script src="../assets/js/api.js"></script>
    <script src="../assets/js/reg-sw.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  </body>
</html>
